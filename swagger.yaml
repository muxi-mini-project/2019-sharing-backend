swagger: '2.0'

info:
  description: to share your date
  version: 1.0.0
  title: sharing
    
host: 47.102.120.167:2333
basePath: /api
tags:
  - name: user
    description: user
  - name: file
    description: file
    
schemes:
  - https
  - http
  
paths:
  /user/register/:
    post:
      tags:
        - user
      summary: 注册
      description: login for account
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: data
          in: body
          description: post data
          schema:
            required:
              - username
              - password
              - user_id
            properties:
              user_id:
                type: string
                description: 账号（学号）
              password:
                type: string
                description: 一站式服务平台密码
              username:
                type: string
                description: 用户名
      responses:
        200:
          description: successfully login
          schema:
            type: object
            required:
              - token
            properties:
              token:
                type: string
              msg:
                type: string
                description: 注册结果信息
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 学号或密码错误
          schema:
            type: object
            properties:
              msg:
                type: string
   #   security:
    #    - petstore_auth:
     #       - 'write:pets'
      #      - 'read:pets'
      
  /user/login/:
    post:
      tags:
        - user
      summary: 登录
      description: login for account
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: data
          in: body
          description: post data
          schema:
            required:
              - user_id
              - password
            properties:
              user_id:
                type: string
                description: 账号（学号）
              password:
                type: string
                description: 一站式服务平台密码
      responses:
        200:
          description: successfully login
          schema:
            type: object
            required:
              - token
            properties:
              token:
                type: string
              msg:
                type: string
                description: 登录结果信息
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 用户名或密码错误
          schema:
            type: object
            properties:
              msg:
                type: string
   #   security:
    #    - petstore_auth:
     #       - 'write:pets'
      #      - 'read:pets'
      
  /user/user_info/:
    get:
      tags:
        - user
      summary: 自己或他人个人信息
      description: user's information
      produces:
        - application/js on
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - user_id
            properties:
              user_id:
                type: integer
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              username:
                type: string
              signture:
                type: string
              image_url:
                type: string
              fans_num:
                type: integer
              follower_num:
                type: integer
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
  
  /user/background/modify/:
    put:
      tags:
        - user
      summary: 修改背景（如果本来没有头像，用这个上传）
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - background_url
            properties:
              background_url:
                type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                
  /user/image/modify/:
    put:
      tags:
        - user
      summary: 修改头像
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - image_url
            properties:
              image_url:
                type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
            
  /user/signture/modify/:
    put:
      tags:
        - user
      summary: 修改签名
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - signture
            properties:
              signture:
                type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string  
                
  /user/user_id/follower/:
    get:
      tags:
        - user
      summary: follower列表和动态
      description: get the follower list
      #operationId: uploadFile
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: integer
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              total:
                type: integer
              followerlist:
                type: array
                items:
                  properties:
                    user_id:
                      type: string
                    follower_name:
                      type: string
                    image_url:
                      type: string
                    signture:
                      type: string
                    follower_up:
                      type: array
                      items:
                        properties:
                          file_name:
                            type: string
                          file_url:
                            type: string
                          collect_num:
                            type: integer
                          down_num:
                            type: integer
                          up_time:
                            type: integer
                          format:
                            type: string
                          college:
                            type: string
                          subject:
                            type: string
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string

  /user/follower/deletion/:
    delete:
      tags:
        - user
      summary: 移除follower
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - follower_id
            properties:
              follower_id:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string 

  /user/user_id/fans/:
    get:
      tags:
        - user
      summary: fans列表
      description: get the fans list
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: integer  
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              total:
                type: integer
              followerlist:
                type: array
                items:
                  properties:
                    user_id:
                      type: string
                    fans_name:
                      type: string
                    image_url:
                      type: string
                    signture:
                      type: string
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
  
  /massage/user_id/massage_info/:
    get:
      tags:
        - massage
      summary: 留言
      description: massage's information
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: integer
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              followerlist:
                type: array
                items:
                  properties:
                    image_url:
                      type: string
                    username:
                      type: string
                    massage:
                      type: string
                    time:
                      type: string
              time :
                type: integer
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string               
  
  /massage/upload/:
    post:
      tags:
        - massage
      summary: 发出留言
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - massage
              - bewritten
            properties:
              massage:
                type: string
              bewritten:
                type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string

  
  /user/down_list/:
    get:
      tags:
        - user
      summary: 下载列表
      description: get the assignment list
      #operationId: uploadFile
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - user_id
            properties:
              user_id:
                type: integer
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              download_list:
                type: array
                items:
                  properties:
                    file_name:
                      type: string
                    file_content:
                      type: string
                    subject:
                      type: string
                    college:
                      type: string
                    up_time:
                      type: integer
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
    
  /user/up_list/:
    get:
      tags:
        - user
      summary: 上传列表
      description: get the upload list
      #operationId: uploadFile
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - user_id
            properties:
              user_id:
                type: integer
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              upload_ist:
                type: array
                items:
                  properties:
                    file_name:
                      type: string
                    file_content:
                      type: string
                    subject:
                      type: string
                    college:
                      type: string
                    up_time:
                      type: integer
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string    
    
  /user/collection_list/:
    get:
      tags:
        - user
      summary: 收藏列表
      description: get the collection list
      #operationId: uploadFile
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - user_id
            properties:
              user_id:
                type: integer
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              collect_list:
                type: array
                items:
                  properties:
                    file_name:
                      type: string
                    content:
                      type: string
                    subject:
                      type: string
                    college:
                      type: string
                    up_time:
                      type: integer
                    collect_list:
                      type: integer
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string

  /file/cancel_collection/:
    delete:
      tags:
        - file
      summary: 移除收藏文件
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_id
            properties:
              file_id:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string 
                
  /file/deletion/:
    delete:
      tags:
        - file
      summary: 移除文件
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_id
            properties:
              file_id:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string   
                
  /file/file_info/:
    get:
      tags:
        - file
      summary: 文件信息
      description: file's information
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_id
            properties:
              file_id:
                type: integer
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              file_name:
                type: string
              file_url:
                type: string
              format:
                type: string
              type:
                type: string  
              content :
                type: string
              subject:
                type: string
              like:
                type: integer
              grade:
                type: integer
              size:
                type: integer
              collect_num:
                type: integer
              down_num:
                type: integer
              up_time:
                type: integer
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
   
  /file/upload/:
    post:
      tags:
        - file
      summary: 上传文件
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_url
            properties:
              file_url:
                type: integer
              file_title:
                type: string
              college:
                type: string
              subject:
                type: string
              format:
                type: string
              introduction:
                type: string
              type:
                type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string   
                
  /file/download/:
    post:
      tags:
        - file
      summary: 下载文件
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_id
            properties:
              file_id:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string  
  
  /file/collection/:
    post:
      tags:
        - file
      summary: 收藏文件
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_id
            properties:
              file_id:
                type: integer
              collect_list:
                type: integer
              #没分文件夹就先别写
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string  
                
  /file/collect_list/modify/:
    put:
      tags:
        - file
      summary: 修改文件夹
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - image_url
            properties:
              file_id:
                type: integer
              collect_list:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
  
  /file/like/:
    put:
      tags:
        - file
      summary: 点赞文件
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_id
            properties:
              file_id:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string  
  
  /file/cancel_like/:
    delete:
      tags:
        - file
      summary: 取消点赞文件
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - file_id
            properties:
              file_id:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string 
                
  /file/searching/:
    get:
      tags:
       - file
      summary: 课程搜索文件
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          type: string
          required: false
        - name: page
          in: query
          required: true
          type: integer
        - name: limite
          in: query
          required: true
          type: integer
        - name: data
          in: body
          schema:
            type: object
            properties:
              college:
                type: string
              subject:
                type: string
              format:
                type: string
              type:
                type: string
              arrange_way:
                type: string
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              file:
                type: object
                properties:
                  file_title:
                    type: string
                  uploader:
                    type: string
                  image_url1:
                    type: string
                  likes_num:
                    type: integer
                  download_num:
                    type: integer
                  collect_num:
                    type: integer
                  upload_time:
                    type: string
                  score:
                    type: integer
        '400':
          description: 参数不全
          schema: 
            type: object
            properties:
              msg:
                type: string
        '401':
          description: 身份认证失败
          schema:
            type: object
            properties:
              msg:
                type: string

  